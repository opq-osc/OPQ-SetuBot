import json
from pathlib import Path
from typing import Literal

from botoy import Action,ctx
from loguru import logger
from pydantic import BaseModel
import asyncio

async def generateSingleGroup():
    logger.info("开始更新所有群数据~")
    groupList = await action.getGroupList()
    print(groupList)
    groupid = ctx.group_msg.from_group
    filePath = (
            curFileDir.parent
            / "plugins"
            / "setu"
            / "database"
            / "DB"
            / "configs"
            / "{}.json".format(groupid)
    )
    adminList = await action.getGroupAdminList(groupid)
    # print(adminList)
    admins_QQid = [i["Uin"] for i in adminList]
    # print(admins_QQid)
    with open(filePath, "w", encoding="utf-8") as f:
        json.dump(
            GroupConfig(admins=admins_QQid).dict(), f, indent=4, ensure_ascii=False
        )
    logger.success("%s.json创建成功" % groupid)
    logger.success("更新群信息成功~")